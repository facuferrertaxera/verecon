<core:FragmentDefinition xmlns:mvc="sap.ui.core.mvc"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns="sap.m"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:sv="sap.ui.comp.smartvariants"
    xmlns:sfb="sap.ui.comp.smartfilterbar"
    displayBlock="true">
    <Dialog 
        id="ReconciliationDialog" 
        title="{i18n>reconciliationPopup.NewReconciliation}"
        showHeader="true" 
        resizable="false" 
        contentHeight="auto" 
        contentWidth="420px" 
        busyIndicatorDelay="{view>/busyIndicatorDelay}">
        <content>
            <VBox width="96%" class="sapUiTinyMarginTop sapUiTinyMarginBegin sapUiTinyMarginEnd">
                <sv:SmartVariantManagement 
                    class="sapUiSmallMarginBegin" 
                    id="reconciliationSmartVariantManagement" 
                    persistencyKey="tech.taxera.taxreporting.verecon.reconciliation.vm" 
                    showShare="true" 
                    showExecuteOnSelection="true" 
                    entitySet="NewRecParameter"/>
                   
                <sfb:SmartFilterBar 
                    search="onReconciliationSearch" 
                    class="SFDialogContent reconciliationSingleColumnFilterBar" 
                    id="reconciliationSmartFilterBar" 
                    showClearOnFB="false" 
                    showGoOnFB="false" 
                    showFilterConfiguration="false" 
                    liveMode="false" 
                    smartVariant="reconciliationSmartVariantManagement" 
                    useToolbar="false" 
                    entitySet="NewRecParameter" 
                    persistencyKey="tech.taxera.taxreporting.verecon.reconciliation.vm" 
                    assignedFiltersChanged="onReconciliationAssignedFiltersChanged" 
                    enableBasicSearch="false"
                    considerSelectionVariants="false">
                    <sfb:controlConfiguration>
                        <sfb:ControlConfiguration 
                            key="country" 
                            mandatory="mandatory" 
                            index="1" 
                            visibleInAdvancedArea="true">
                        </sfb:ControlConfiguration>
                        <sfb:ControlConfiguration 
                            key="companycode" 
                            mandatory="mandatory" 
                            index="2" 
                            visibleInAdvancedArea="true">
                        </sfb:ControlConfiguration>
                        <sfb:ControlConfiguration 
                            key="reporting_date" 
                            mandatory="mandatory" 
                            index="3" 
                            visibleInAdvancedArea="true" 
                            conditionType="{
                                module: 'sap.ui.comp.config.condition.DateRangeType',
                                ignoreTime: true,
                                utc: true
                            }">
                        </sfb:ControlConfiguration>
                    </sfb:controlConfiguration>
                    <sfb:customData>
                        <core:CustomData key="dateFormatSettings" value='\{"UTC":true\}' />
                    </sfb:customData>
                    <sfb:layoutData>
                        <FlexItemData shrinkFactor="0"/>
                    </sfb:layoutData>
                </sfb:SmartFilterBar>
            </VBox>
        </content>
        <buttons>
            <Button 
                text="{i18n>reconciliationPopup.Proceed}" 
                type="Emphasized" 
                press="onNewReconciliationProceed"/>
            <Button 
                text="{i18n>reconciliationPopup.Cancel}" 
                press="onNewReconciliationCancel"/>
        </buttons>
    </Dialog>
</core:FragmentDefinition>
